{"version":3,"sources":["/Users/rquast/projects/fspec.videos/src/validator.ts"],"sourcesContent":["import { access, constants, mkdir } from 'fs/promises';\nimport { dirname } from 'path';\n\nexport interface RecordingOptions {\n  scriptPath: string;\n  outputPath: string;\n  width: number;\n  height: number;\n  fps: number;\n  headless: boolean;\n}\n\n/**\n * Validates recording options before starting the recording process\n * @throws Error if any validation fails\n */\nexport async function validateRecordingOptions(\n  options: RecordingOptions\n): Promise<void> {\n  // Validate width\n  if (options.width <= 0) {\n    throw new Error('Width must be greater than 0');\n  }\n  if (options.width > 300) {\n    throw new Error('Width must be between 1 and 300');\n  }\n\n  // Validate height\n  if (options.height <= 0) {\n    throw new Error('Height must be greater than 0');\n  }\n  if (options.height > 100) {\n    throw new Error('Height must be between 1 and 100');\n  }\n\n  // Validate FPS\n  if (options.fps < 1 || options.fps > 120) {\n    throw new Error('FPS must be between 1 and 120');\n  }\n\n  // Validate script file exists\n  try {\n    await access(options.scriptPath, constants.R_OK);\n  } catch {\n    throw new Error(`Script file not found: ${options.scriptPath}`);\n  }\n\n  // Validate output directory exists or can be created\n  const outputDir = dirname(options.outputPath);\n  try {\n    await access(outputDir, constants.W_OK);\n  } catch {\n    // Try to create the directory\n    try {\n      await mkdir(outputDir, { recursive: true });\n    } catch {\n      throw new Error(\n        `Output directory is not writable or cannot be created: ${outputDir}`\n      );\n    }\n  }\n}\n"],"names":["access","constants","mkdir","dirname","validateRecordingOptions","options","outputDir","width","Error","height","fps","scriptPath","R_OK","outputPath","W_OK","recursive"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,MAAM,EAAEC,SAAS,EAAEC,KAAK,QAAQ,cAAc;AACvD,SAASC,OAAO,QAAQ,OAAO;AAW/B;;;CAGC,GACD,OAAO,SAAeC,yBACpBC,OAAyB;;eA+BnBC;;;;oBA7BN,iBAAiB;oBACjB,IAAID,QAAQE,KAAK,IAAI,GAAG;wBACtB,MAAM,IAAIC,MAAM;oBAClB;oBACA,IAAIH,QAAQE,KAAK,GAAG,KAAK;wBACvB,MAAM,IAAIC,MAAM;oBAClB;oBAEA,kBAAkB;oBAClB,IAAIH,QAAQI,MAAM,IAAI,GAAG;wBACvB,MAAM,IAAID,MAAM;oBAClB;oBACA,IAAIH,QAAQI,MAAM,GAAG,KAAK;wBACxB,MAAM,IAAID,MAAM;oBAClB;oBAEA,eAAe;oBACf,IAAIH,QAAQK,GAAG,GAAG,KAAKL,QAAQK,GAAG,GAAG,KAAK;wBACxC,MAAM,IAAIF,MAAM;oBAClB;;;;;;;;;oBAIE;;wBAAMR,OAAOK,QAAQM,UAAU,EAAEV,UAAUW,IAAI;;;oBAA/C;;;;;;;oBAEA,MAAM,IAAIJ,MAAM,AAAC,0BAA4C,OAAnBH,QAAQM,UAAU;;oBAG9D,qDAAqD;oBAC/CL,YAAYH,QAAQE,QAAQQ,UAAU;;;;;;;;;oBAE1C;;wBAAMb,OAAOM,WAAWL,UAAUa,IAAI;;;oBAAtC;;;;;;;;;;;;;;;oBAIE;;wBAAMZ,MAAMI,WAAW;4BAAES,WAAW;wBAAK;;;oBAAzC;;;;;;;oBAEA,MAAM,IAAIP,MACR,AAAC,0DAAmE,OAAVF;;;;;;;;;;;;IAIlE","file":"validator.js"}