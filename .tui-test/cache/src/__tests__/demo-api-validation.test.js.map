{"version":3,"sources":["/Users/rquast/projects/fspec.videos/src/__tests__/demo-api-validation.test.ts"],"sourcesContent":["/**\n * Feature: spec/features/demo-scripts-use-incorrect-microsoft-tui-test-api.feature\n */\n\nimport { describe, it, expect } from 'vitest';\nimport { readFileSync, existsSync } from 'fs';\n\ndescribe('Feature: Demo scripts use correct microsoft/tui-test API', () => {\n  describe('Scenario: Shell demo script uses correct tui-test API', () => {\n    it('should have correct API usage', () => {\n      // @step Given I create a demo script as demos/shell-commands.test.ts\n      const demoPath = 'demos/shell-commands.test.ts';\n      expect(existsSync(demoPath)).toBe(true);\n\n      // @step When I import test, expect, and Shell from microsoft/tui-test\n      const content = readFileSync(demoPath, 'utf-8');\n      expect(content).toContain(\"import { test, expect, Shell } from '@microsoft/tui-test'\");\n\n      // @step And I use test.use({ shell: Shell.Bash }) to configure the shell\n      expect(content).toContain('test.use({ shell: Shell.Bash })');\n\n      // @step And I write test('demo', async ({ terminal }) => {...}) with terminal fixture\n      expect(content).toContain(\"test('demonstrate shell commands', async ({ terminal }) =>\");\n\n      // @step And I use terminal.submit('ls') to execute commands\n      expect(content).toContain(\"terminal.submit(\");\n\n      // @step And I use await expect(terminal.getByText(...)).toBeVisible() for assertions\n      expect(content).toContain('await expect(terminal.getByText');\n      expect(content).toContain('.toBeVisible(');\n\n      // @step Then the demo script uses correct tui-test API\n      expect(content).toMatch(/test\\([^)]+async\\s*\\(\\s*{\\s*terminal\\s*}\\s*\\)\\s*=>/);\n\n      // @step And the script can be run with tui-test CLI\n      expect(demoPath.endsWith('.test.ts')).toBe(true);\n    });\n  });\n\n  describe('Scenario: fspec TUI demo script uses correct API', () => {\n    it('should control TUI correctly', () => {\n      // @step Given I create a demo script as demos/fspec-navigation.test.ts\n      const demoPath = 'demos/fspec-navigation.test.ts';\n      expect(existsSync(demoPath)).toBe(true);\n\n      // @step When I use test.use({ program: { file: 'node', args: ['fspec/dist/index.js'] } })\n      const content = readFileSync(demoPath, 'utf-8');\n      expect(content).toContain('test.use({');\n      expect(content).toContain('program:');\n\n      // @step And I write test('demo', async ({ terminal }) => {...}) with terminal fixture\n      expect(content).toContain(\"test('demonstrate fspec TUI navigation', async ({ terminal }) =>\");\n\n      // @step And I use terminal.keyDown() for navigation\n      expect(content).toContain('terminal.keyDown()');\n\n      // @step And I use terminal.write() for key presses\n      expect(content).toContain(\"terminal.write(\");\n\n      // @step And I use await expect(terminal.getByText('fspec')).toBeVisible()\n      expect(content).toContain(\"await expect(terminal.getByText('fspec'\");\n\n      // @step Then the demo script controls the TUI correctly\n      expect(content).toMatch(/terminal\\.key/);\n\n      // @step And the script uses terminal fixture methods\n      expect(content).toContain('terminal.');\n    });\n  });\n});\n"],"names":["describe","it","expect","readFileSync","existsSync","demoPath","toBe","content","toContain","toMatch","endsWith"],"mappings":"AAAA;;CAEC,GAED,SAASA,QAAQ,EAAEC,EAAE,EAAEC,MAAM,QAAQ,SAAS;AAC9C,SAASC,YAAY,EAAEC,UAAU,QAAQ,KAAK;AAE9CJ,SAAS,4DAA4D;IACnEA,SAAS,yDAAyD;QAChEC,GAAG,iCAAiC;YAClC,qEAAqE;YACrE,IAAMI,WAAW;YACjBH,OAAOE,WAAWC,WAAWC,IAAI,CAAC;YAElC,sEAAsE;YACtE,IAAMC,UAAUJ,aAAaE,UAAU;YACvCH,OAAOK,SAASC,SAAS,CAAC;YAE1B,yEAAyE;YACzEN,OAAOK,SAASC,SAAS,CAAC;YAE1B,sFAAsF;YACtFN,OAAOK,SAASC,SAAS,CAAC;YAE1B,4DAA4D;YAC5DN,OAAOK,SAASC,SAAS,CAAC;YAE1B,qFAAqF;YACrFN,OAAOK,SAASC,SAAS,CAAC;YAC1BN,OAAOK,SAASC,SAAS,CAAC;YAE1B,uDAAuD;YACvDN,OAAOK,SAASE,OAAO,CAAC;YAExB,oDAAoD;YACpDP,OAAOG,SAASK,QAAQ,CAAC,aAAaJ,IAAI,CAAC;QAC7C;IACF;IAEAN,SAAS,oDAAoD;QAC3DC,GAAG,gCAAgC;YACjC,uEAAuE;YACvE,IAAMI,WAAW;YACjBH,OAAOE,WAAWC,WAAWC,IAAI,CAAC;YAElC,0FAA0F;YAC1F,IAAMC,UAAUJ,aAAaE,UAAU;YACvCH,OAAOK,SAASC,SAAS,CAAC;YAC1BN,OAAOK,SAASC,SAAS,CAAC;YAE1B,sFAAsF;YACtFN,OAAOK,SAASC,SAAS,CAAC;YAE1B,oDAAoD;YACpDN,OAAOK,SAASC,SAAS,CAAC;YAE1B,mDAAmD;YACnDN,OAAOK,SAASC,SAAS,CAAC;YAE1B,0EAA0E;YAC1EN,OAAOK,SAASC,SAAS,CAAC;YAE1B,wDAAwD;YACxDN,OAAOK,SAASE,OAAO,CAAC;YAExB,qDAAqD;YACrDP,OAAOK,SAASC,SAAS,CAAC;QAC5B;IACF;AACF","file":"demo-api-validation.test.js"}